<!-- success.html - 支付成功页
     展示订单编号、支付金额、支付方式和时间。
     包含彩纸动画效果（confetti）。
     数据来源：order.checkout POST 成功后重定向
-->
{% extends "base.html" %}

{% block title %}支付成功 - HackShop{% endblock %}

{% block content %}
<div class="container py-5 animate-fade-in">
    <div class="text-center">
        <div class="mb-4">
            <i class="fas fa-check-circle success-icon" style="font-size: 5rem;"></i>
        </div>
        <h2 class="mb-3 text-primary">支付成功！</h2>
        <p class="text-muted mb-5">感谢您的购买，您的订单已成功处理。</p>
        
        <div class="card mx-auto mb-4 shadow-sm" style="max-width: 600px; border-radius: 12px;">
            <div class="card-body text-start">
                <div class="d-flex justify-content-between mb-2">
                    <span class="fw-bold">订单编号：</span>
                    <span>{{ order.order_number }}</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span class="fw-bold">支付金额：</span>
                    <span class="text-danger fw-bold">¥{{ "{:.2f}".format(order.total_amount) }}</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span class="fw-bold">支付方式：</span>
                    <span>{{ '余额支付' if order.payment_method == 'balance' else order.payment_method }}</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span class="fw-bold">支付时间：</span>
                    <span>{{ order.paid_at.strftime('%Y-%m-%d %H:%M:%S') }}</span>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center gap-3">
            <a href="{{ url_for('main.index') }}" class="btn btn-primary">返回首页</a>
            <a href="{{ url_for('user.profile', section='orders') }}" class="btn btn-outline-primary">查看订单详情</a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Simple confetti effect
    document.addEventListener('DOMContentLoaded', function() {
        const colors = ['#4A6CF7', '#FF6B35', '#10B981', '#F59E0B', '#EF4444'];
        for (let i = 0; i < 30; i++) {
            const piece = document.createElement('div');
            piece.className = 'confetti-piece';
            piece.style.left = Math.random() * 100 + 'vw';
            piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            piece.style.animationDelay = Math.random() * 2 + 's';
            piece.style.animationDuration = (2 + Math.random() * 2) + 's';
            document.body.appendChild(piece);
            setTimeout(() => piece.remove(), 5000);
        }
    });
</script>
{% endblock %}